/* Copyright (c) 2012, Code Aurora Forum. All rights reserved.
 *
 * Copyright (C) 2011-2014 Xiaomi Ltd.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 */

#include "msm_sensor.h"
#define SENSOR_NAME "s5k3h2"
#define PLATFORM_DRIVER_NAME "msm_camera_s5k3h2"
#define s5k3h2_obj s5k3h2_##obj

DEFINE_MUTEX(s5k3h2_mut);
static struct msm_sensor_ctrl_t s5k3h2_s_ctrl;

#define LITEON 1
#define SUNNY  2
static int vendor;
static int otp_ok;

static struct msm_camera_i2c_reg_conf s5k3h2_start_settings[] = {
	{0x0100, 0x01},
};

static struct msm_camera_i2c_reg_conf s5k3h2_stop_settings[] = {
	{0x0100, 0x00},
};

static struct msm_camera_i2c_reg_conf s5k3h2_groupon_settings[] = {
	{0x0104, 0x01},
};

static struct msm_camera_i2c_reg_conf s5k3h2_groupoff_settings[] = {
	{0x0104, 0x00},
};

static struct msm_camera_i2c_reg_conf s5k3h2_prev_settings[] = {
	/*Timing configuration */
	{0x0200, 0x02},		/*FINE_INTEGRATION_TIME_ */
	{0x0201, 0x50},
	{0x0202, 0x04},		/*COARSE_INTEGRATION_TIME */
	{0x0203, 0xDB},
	{0x0204, 0x00},		/*ANALOG_GAIN */
	{0x0205, 0x20},
	{0x0342, 0x0D},		/*LINE_LENGTH_PCK */
	{0x0343, 0x8E},
	{0x0340, 0x04},		/*FRAME_LENGTH_LINES */
	{0x0341, 0xE0},
	/*Output Size (1640x1232) */
	{0x0344, 0x00},		/*X_ADDR_START */
	{0x0345, 0x00},
	{0x0346, 0x00},		/*Y_ADDR_START */
	{0x0347, 0x00},
	{0x0348, 0x0C},		/*X_ADDR_END */
	{0x0349, 0xCF},		/* 1640 */
	{0x034A, 0x09},		/*Y_ADDR_END */
	{0x034B, 0x9F},
	{0x0381, 0x01},		/*X_EVEN_INC */
	{0x0383, 0x03},		/*X_ODD_INC */
	{0x0385, 0x01},		/*Y_EVEN_INC */
	{0x0387, 0x03},		/*Y_ODD_INC */
	{0x0401, 0x00},		/*DERATING_EN */
	{0x0405, 0x10},
	{0x0700, 0x05},		/*FIFO_WATER_MARK_PIXELS */
	{0x0701, 0x30},
	{0x034C, 0x06},		/*X_OUTPUT_SIZE */
	{0x034D, 0x68},
	{0x034E, 0x04},		/*Y_OUTPUT_SIZE */
	{0x034F, 0xD0},
	/*Manufacture Setting */
	{0x300E, 0x2D},
/*	{0x301D, 0x80}, */
	{0x301A, 0x77},
	{0x3053, 0xCF},

	{0x3202, 0x34},
	{0x3203, 0x4e},
	{0x3204, 0x04},
	{0x3205, 0xec},
	{0x3206, 0x03},
	{0x3207, 0x48},

};

static struct msm_camera_i2c_reg_conf s5k3h2_snap_settings[] = {
	/*Timing configuration */
	{0x0200, 0x02},		/*FINE_INTEGRATION_TIME_ */
	{0x0201, 0x50},
	{0x0202, 0x04},		/*COARSE_INTEGRATION_TIME */
	{0x0203, 0xE7},
	{0x0204, 0x00},		/*ANALOG_GAIN */
	{0x0205, 0x20},
	{0x0342, 0x0D},		/*LINE_LENGTH_PCK */
	{0x0343, 0x8E},
	{0x0340, 0x09},		/*FRAME_LENGTH_LINES */
	{0x0341, 0xC0},
	/*Output Size (3280x2464) */
	{0x0344, 0x00},		/*X_ADDR_START */
	{0x0345, 0x00},
	{0x0346, 0x00},		/*Y_ADDR_START */
	{0x0347, 0x00},
	{0x0348, 0x0C},		/*X_ADDR_END */
	{0x0349, 0xCF},
	{0x034A, 0x09},		/*Y_ADDR_END */
	{0x034B, 0x9F},
	{0x0381, 0x01},		/*X_EVEN_INC */
	{0x0383, 0x01},		/*X_ODD_INC */
	{0x0385, 0x01},		/*Y_EVEN_INC */
	{0x0387, 0x01},		/*Y_ODD_INC */
	{0x0401, 0x00},		/*DERATING_EN */
	{0x0405, 0x10},
	{0x0700, 0x05},		/*FIFO_WATER_MARK_PIXELS */
	{0x0701, 0x30},
	{0x034C, 0x0C},		/*X_OUTPUT_SIZE */
	{0x034D, 0xD0},
	{0x034E, 0x09},		/*Y_OUTPUT_SIZE */
	{0x034F, 0xA0},
	/*Manufacture Setting */
	{0x300E, 0x29},
/*	{0x301D, 0x00}, */
	{0x301A, 0x77},
	{0x3053, 0xCF},

	{0x3202, 0x67},
	{0x3203, 0x9a},
	{0x3204, 0x02},
	{0x3205, 0x7c},
	{0x3206, 0x01},
	{0x3207, 0xaa}
};

static struct msm_camera_i2c_reg_conf s5k3h2_fullhd_settings[] = {
	/* Timing configuration */
	{0x0200, 0x02},		/* fine integration time */
	{0x0201, 0x50},
	{0x0202, 0x04},		/* Coarse integration time */
	{0x0203, 0xE7},		/* E7 */
	{0x0204, 0x00},		/* Analog gain */
	{0x0205, 0x20},
	{0x0342, 0x0D},		/* Line_length_pck 3470d */
	{0x0343, 0x8E},
	{0x0340, 0x05},		/* 09	Frame_length_lines 1492d */
	{0x0341, 0xD4},		/* B0 */
	/*Output Size (3280x2464) */
	{0x0344, 0x01},		/* X addr start 328d */
	{0x0345, 0x48},
	{0x0346, 0x01},		/* Y addr start 494d */
	{0x0347, 0xEE},
	{0x0348, 0x0B},		/* X addr end 2951d */
	{0x0349, 0x87},
	{0x034A, 0x07},		/* Y addr end 1969d */
	{0x034B, 0xB1},
	{0x0381, 0x01},		/* x_even_inc = 1 */
	{0x0383, 0x01},		/* x_odd_inc = 1 */
	{0x0385, 0x01},		/* y_even_inc = 1 */
	{0x0387, 0x01},		/* y_odd_inc = 1 */
	{0x0401, 0x00},		/* Derating_en  = 0 (disable) */
	{0x0405, 0x10},
	{0x0700, 0x05},		/* fifo_water_mark_pixels = 1328 default */
	{0x0701, 0x30},
	{0x034C, 0x0A},		/* X_output_size = 2624 */
	{0x034D, 0x40},
	{0x034E, 0x05},		/* Y_output_size =1476 */
	{0x034F, 0xC4},
	/*Manufacture Setting */
	{0x300E, 0x29},
	/* {0x301D, 0x80}, */
	{0x301A, 0x77},
	{0x3053, 0xCF},

	{0x3202, 0x67},
	{0x3203, 0x9a},
	{0x3204, 0x02},
	{0x3205, 0x7c},
	{0x3206, 0x01},
	{0x3207, 0xaa},
};

static struct msm_camera_i2c_reg_conf s5k3h2_recommend_settings[] = {
/* MIPI */
	{0x0101, 0x00},
	{0x3210, 0x81},
	{0x3200, 0x08},
	{0x3065, 0x35},
	{0x310E, 0x00},
	{0x3098, 0xAB},
	{0x30C7, 0x0A},
	{0x309A, 0x01},
	{0x310D, 0xC6},
	{0x30c3, 0x40},
	{0x30BB, 0x02},
	{0x30BC, 0x38},
	{0x30BD, 0x40},
	{0x3110, 0x70},
	{0x3111, 0x80},
	{0x3112, 0x7B},
	{0x3113, 0xC0},
	{0x30C7, 0x1A},
/* RECOMMENDED */
	{0x020E, 0x01},
	{0x020F, 0X40},
	{0x0214, 0x01},
	{0x0215, 0x40},
	{0x0212, 0x01},
	{0x0213, 0x10},
	{0x3000, 0x08},
	{0x3001, 0x05},
	{0x3002, 0x0D},
	{0x3003, 0x21},
	{0x3004, 0x62},
	{0x3005, 0x0B},
	{0x3006, 0x6D},
	{0x3007, 0x02},
	{0x3008, 0x62},
	{0x3009, 0x62},
	{0x300A, 0x41},
	{0x300B, 0x10},
	{0x300C, 0x21},
	{0x300D, 0x04},
	{0x307E, 0x03},
	{0x307F, 0xA5},
	{0x3080, 0x04},
	{0x3081, 0x29},
	{0x3082, 0x03},
	{0x3083, 0x21},
	{0x3011, 0x5F},
	{0x3156, 0xE2},
	{0x3027, 0xBE},
	{0x300f, 0x02},
	{0x3010, 0x10},
	{0x3017, 0x74},
	{0x3018, 0x00},
	{0x3020, 0x02},
	{0x3021, 0x00},
	{0x3023, 0x80},
	{0x3024, 0x08},
	{0x3025, 0x08},
	{0x301C, 0xD4},
	{0x315D, 0x00},
/*	{0x3053, 0xCF}, */
	{0x3054, 0x00},
	{0x3055, 0x35},
	{0x3062, 0x04},
	{0x3063, 0x38},
	{0x31A4, 0x04},
	{0x3016, 0x54},
	{0x3157, 0x02},
	{0x3158, 0x00},
	{0x315B, 0x02},
	{0x315C, 0x00},
	{0x301B, 0x05},
	{0x3028, 0x41},
	{0x302A, 0x10},
	{0x3060, 0x00},
	{0x302D, 0x19},
	{0x302B, 0x05},
	{0x3072, 0x13},
	{0x3073, 0x21},
	{0x3074, 0x82},
	{0x3075, 0x20},
	{0x3076, 0xA2},
	{0x3077, 0x02},
	{0x3078, 0x91},
	{0x3079, 0x91},
	{0x307A, 0x61},
	{0x307B, 0x28},
	{0x307C, 0x31},
/* black level */
	{0x304e, 0x40},
	{0x304f, 0x01},
	{0x3050, 0x00},
	{0x3088, 0x01},
	{0x3089, 0x00},
	{0x3210, 0x81},
	{0x3211, 0x00},
	{0x308e, 0x01},
	{0x308f, 0x8f},
	{0x3064, 0x03},
	{0x31a7, 0x0f},
/* PLL */
	{0x0305, 0x04},		/*PRE_PLL_CLK_DIV */
	{0x0306, 0x00},		/*PLL_MULTIPLIER */
	{0x0307, 0x6C},		/*PLL_MULTIPLIER */
	{0x0303, 0x01},		/*VT_SYS_CLK_DIV */
	{0x0301, 0x05},		/*VT_PIX_CLK_DIV */
	{0x030B, 0x01},		/*OP_SYS_CLK_DIV */
	{0x0309, 0x05},		/*OP_PIX_CLK_DIV */
	{0x30CC, 0xB0},		/*DPHY_BAND_CTRL */
	{0x31A1, 0x58}, /*BINNING*/
/* OTP */
/*	{0x30C1, 0x0F}, */
/*	{0X3201, 0x00}, */
	{0x3202, 0x34},
	{0x3203, 0x4e},
	{0x3204, 0x04},
	{0x3205, 0xec},
	{0x3206, 0x03},
	{0x3207, 0x48},
	{0x3208, 0x00},
	{0x3209, 0x00},
	{0x320a, 0x00},
	{0x320b, 0x00},
	{0x320c, 0x00},
	{0x320d, 0x00},
	{0x320e, 0x00},
	{0x320f, 0x00},
/*	{0x3200, 0x28}, */
/*	{0x3A2D, 0x00}, */
/*	{0x3A2D, 0x01}, */

/* GR */
	{0x3214, 0x00},
	{0x3215, 0x81},
	{0x3216, 0xdd},
	{0x3217, 0x00},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xee},
	{0x3216, 0x81},
	{0x3217, 0x01},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfe},
	{0x3216, 0x76},
	{0x3217, 0x02},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x11},
	{0x3216, 0xcc},
	{0x3217, 0x03},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf5},
	{0x3216, 0x35},
	{0x3217, 0x04},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x00},
	{0x3216, 0x94},
	{0x3217, 0x05},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xd5},
	{0x3216, 0x02},
	{0x3217, 0x06},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfa},
	{0x3216, 0xbc},
	{0x3217, 0x07},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x11},
	{0x3216, 0x90},
	{0x3217, 0x08},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xec},
	{0x3216, 0xc2},
	{0x3217, 0x09},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfc},
	{0x3216, 0xd6},
	{0x3217, 0x0a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x12},
	{0x3216, 0x26},
	{0x3217, 0x0b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1f},
	{0x3216, 0xb5},
	{0x3217, 0x0c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x09},
	{0x3216, 0x61},
	{0x3217, 0x0d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xdd},
	{0x3216, 0xfe},
	{0x3217, 0x0e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x25},
	{0x3216, 0xf4},
	{0x3217, 0x0f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x07},
	{0x3216, 0xcf},
	{0x3217, 0x10},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xd8},
	{0x3216, 0xf2},
	{0x3217, 0x11},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xef},
	{0x3216, 0xb3},
	{0x3217, 0x12},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfb},
	{0x3216, 0x34},
	{0x3217, 0x13},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1e},
	{0x3216, 0xf7},
	{0x3217, 0x14},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xd9},
	{0x3216, 0x23},
	{0x3217, 0x15},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf8},
	{0x3216, 0x8b},
	{0x3217, 0x16},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x29},
	{0x3216, 0xe1},
	{0x3217, 0x17},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x0e},
	{0x3216, 0x5a},
	{0x3217, 0x18},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf3},
	{0x3216, 0x37},
	{0x3217, 0x19},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x08},
	{0x3216, 0x04},
	{0x3217, 0x1a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x03},
	{0x3216, 0xef},
	{0x3217, 0x1b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfc},
	{0x3216, 0x66},
	{0x3217, 0x1c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfb},
	{0x3216, 0x65},
	{0x3217, 0x1d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfa},
	{0x3216, 0x9e},
	{0x3217, 0x1e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x15},
	{0x3216, 0x3c},
	{0x3217, 0x1f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xda},
	{0x3216, 0x42},
	{0x3217, 0x20},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1f},
	{0x3216, 0x99},
	{0x3217, 0x21},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x03},
	{0x3216, 0x3b},
	{0x3217, 0x22},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xe9},
	{0x3216, 0x42},
	{0x3217, 0x23},
	{0x3218, 0x01},
	{0x3218, 0x00},
/* R	{0xEED , 0xWR},ITE REGION */
	{0x3214, 0x00},
	{0x3215, 0x90},
	{0x3216, 0xc9},
	{0x3217, 0x24},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xef},
	{0x3216, 0x18},
	{0x3217, 0x25},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf8},
	{0x3216, 0x78},
	{0x3217, 0x26},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1a},
	{0x3216, 0x8e},
	{0x3217, 0x27},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf1},
	{0x3216, 0x34},
	{0x3217, 0x28},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xff},
	{0x3216, 0x47},
	{0x3217, 0x29},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xd2},
	{0x3216, 0x4f},
	{0x3217, 0x2a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf5},
	{0x3216, 0x3b},
	{0x3217, 0x2b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x13},
	{0x3216, 0x31},
	{0x3217, 0x2c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf2},
	{0x3216, 0x24},
	{0x3217, 0x2d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf3},
	{0x3216, 0x13},
	{0x3217, 0x2e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x19},
	{0x3216, 0x89},
	{0x3217, 0x2f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x17},
	{0x3216, 0x9d},
	{0x3217, 0x30},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x10},
	{0x3216, 0x0a},
	{0x3217, 0x31},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xde},
	{0x3216, 0x7a},
	{0x3217, 0x32},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1a},
	{0x3216, 0x4d},
	{0x3217, 0x33},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x16},
	{0x3216, 0x91},
	{0x3217, 0x34},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xd1},
	{0x3216, 0x23},
	{0x3217, 0x35},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfe},
	{0x3216, 0x9c},
	{0x3217, 0x36},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf0},
	{0x3216, 0xeb},
	{0x3217, 0x37},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x24},
	{0x3216, 0x30},
	{0x3217, 0x38},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xe0},
	{0x3216, 0x41},
	{0x3217, 0x39},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xed},
	{0x3216, 0x6d},
	{0x3217, 0x3a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x2e},
	{0x3216, 0x2a},
	{0x3217, 0x3b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x08},
	{0x3216, 0x10},
	{0x3217, 0x3c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xff},
	{0x3216, 0x51},
	{0x3217, 0x3d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfa},
	{0x3216, 0xef},
	{0x3217, 0x3e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x06},
	{0x3216, 0xa9},
	{0x3217, 0x3f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x01},
	{0x3216, 0x26},
	{0x3217, 0x40},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfa},
	{0x3216, 0x1b},
	{0x3217, 0x41},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf6},
	{0x3216, 0x99},
	{0x3217, 0x42},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x0f},
	{0x3216, 0x1c},
	{0x3217, 0x43},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xe3},
	{0x3216, 0x3a},
	{0x3217, 0x44},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1c},
	{0x3216, 0x85},
	{0x3217, 0x45},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xff},
	{0x3216, 0xab},
	{0x3217, 0x46},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xea},
	{0x3216, 0xdc},
	{0x3217, 0x47},
	{0x3218, 0x01},
	{0x3218, 0x00},
/*B	{0xEED , 0xWR},ITE REGION: */
	{0x3214, 0x00},
	{0x3215, 0x76},
	{0x3216, 0x20},
	{0x3217, 0x48},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf2},
	{0x3216, 0x55},
	{0x3217, 0x49},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf8},
	{0x3216, 0xf2},
	{0x3217, 0x4a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x17},
	{0x3216, 0xde},
	{0x3217, 0x4b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf1},
	{0x3216, 0x83},
	{0x3217, 0x4c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x00},
	{0x3216, 0x4f},
	{0x3217, 0x4d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xdb},
	{0x3216, 0x83},
	{0x3217, 0x4e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfa},
	{0x3216, 0x56},
	{0x3217, 0x4f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x13},
	{0x3216, 0x6c},
	{0x3217, 0x50},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xeb},
	{0x3216, 0x4d},
	{0x3217, 0x51},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf9},
	{0x3216, 0xa5},
	{0x3217, 0x52},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x17},
	{0x3216, 0x97},
	{0x3217, 0x53},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x17},
	{0x3216, 0x4a},
	{0x3217, 0x54},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x10},
	{0x3216, 0x69},
	{0x3217, 0x55},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xdd},
	{0x3216, 0x7a},
	{0x3217, 0x56},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1e},
	{0x3216, 0xe7},
	{0x3217, 0x57},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x12},
	{0x3216, 0xf7},
	{0x3217, 0x58},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xcf},
	{0x3216, 0xc1},
	{0x3217, 0x59},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf8},
	{0x3216, 0x91},
	{0x3217, 0x5a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xed},
	{0x3216, 0xd5},
	{0x3217, 0x5b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x21},
	{0x3216, 0x9d},
	{0x3217, 0x5c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xdf},
	{0x3216, 0x25},
	{0x3217, 0x5d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf1},
	{0x3216, 0xce},
	{0x3217, 0x5e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x2e},
	{0x3216, 0x83},
	{0x3217, 0x5f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x07},
	{0x3216, 0x24},
	{0x3217, 0x60},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfe},
	{0x3216, 0x14},
	{0x3217, 0x61},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x01},
	{0x3216, 0xf4},
	{0x3217, 0x62},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x09},
	{0x3216, 0x2a},
	{0x3217, 0x63},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf5},
	{0x3216, 0xaf},
	{0x3217, 0x64},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xff},
	{0x3216, 0xc8},
	{0x3217, 0x65},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfc},
	{0x3216, 0x53},
	{0x3217, 0x66},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x12},
	{0x3216, 0x08},
	{0x3217, 0x67},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xdf},
	{0x3216, 0x71},
	{0x3217, 0x68},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x15},
	{0x3216, 0xec},
	{0x3217, 0x69},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x0e},
	{0x3216, 0x12},
	{0x3217, 0x6a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xe2},
	{0x3216, 0x58},
	{0x3217, 0x6b},
	{0x3218, 0x01},
	{0x3218, 0x00},
/*GB	{0xEED , 0xWR},ITE REGION */
	{0x3214, 0x00},
	{0x3215, 0x82},
	{0x3216, 0xe6},
	{0x3217, 0x6c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xed},
	{0x3216, 0x8f},
	{0x3217, 0x6d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x02},
	{0x3216, 0x3d},
	{0x3217, 0x6e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x0c},
	{0x3216, 0x09},
	{0x3217, 0x6f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf9},
	{0x3216, 0x9c},
	{0x3217, 0x70},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xff},
	{0x3216, 0x39},
	{0x3217, 0x71},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xd2},
	{0x3216, 0xdc},
	{0x3217, 0x72},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfe},
	{0x3216, 0xe6},
	{0x3217, 0x73},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x09},
	{0x3216, 0x95},
	{0x3217, 0x74},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf3},
	{0x3216, 0xc2},
	{0x3217, 0x75},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfd},
	{0x3216, 0x02},
	{0x3217, 0x76},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x0d},
	{0x3216, 0xc0},
	{0x3217, 0x77},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1f},
	{0x3216, 0x95},
	{0x3217, 0x78},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x04},
	{0x3216, 0xff},
	{0x3217, 0x79},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xe9},
	{0x3216, 0x37},
	{0x3217, 0x7a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1d},
	{0x3216, 0x3e},
	{0x3217, 0x7b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x01},
	{0x3216, 0x8e},
	{0x3217, 0x7c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xe5},
	{0x3216, 0x6a},
	{0x3217, 0x7d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf6},
	{0x3216, 0x56},
	{0x3217, 0x7e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf6},
	{0x3216, 0xdf},
	{0x3217, 0x7f},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1a},
	{0x3216, 0x34},
	{0x3217, 0x80},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xdf},
	{0x3216, 0xb3},
	{0x3217, 0x81},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfe},
	{0x3216, 0x59},
	{0x3217, 0x82},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x1e},
	{0x3216, 0x83},
	{0x3217, 0x83},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x01},
	{0x3216, 0x12},
	{0x3217, 0x84},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x05},
	{0x3216, 0xf1},
	{0x3217, 0x85},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfc},
	{0x3216, 0x43},
	{0x3217, 0x86},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x05},
	{0x3216, 0x8b},
	{0x3217, 0x87},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfe},
	{0x3216, 0xf7},
	{0x3217, 0x88},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf8},
	{0x3216, 0xea},
	{0x3217, 0x89},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x05},
	{0x3216, 0x41},
	{0x3217, 0x8a},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x02},
	{0x3216, 0xd5},
	{0x3217, 0x8b},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xea},
	{0x3216, 0x8e},
	{0x3217, 0x8c},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x00},
	{0x3215, 0x19},
	{0x3216, 0xf2},
	{0x3217, 0x8d},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xfb},
	{0x3216, 0xcf},
	{0x3217, 0x8e},
	{0x3218, 0x01},
	{0x3218, 0x00},
	{0x3214, 0x0f},
	{0x3215, 0xf4},
	{0x3216, 0x16},
	{0x3217, 0x8f},
	{0x3218, 0x01},
	{0x3218, 0x00},

	{0x3200, 0x18},
	{0x3200, 0x08},
	{0x3201, 0x00}
};

static struct v4l2_subdev_info s5k3h2_subdev_info[] = {
	{
	 .code = V4L2_MBUS_FMT_SBGGR10_1X10,
	 .colorspace = V4L2_COLORSPACE_JPEG,
	 .fmt = 1,
	 .order = 0,
	 },
	/* more can be supported, to be added later */
};

static struct msm_camera_i2c_conf_array s5k3h2_init_conf[] = {
	{&s5k3h2_recommend_settings[0],
	 ARRAY_SIZE(s5k3h2_recommend_settings), 0, MSM_CAMERA_I2C_BYTE_DATA},
};

static struct msm_camera_i2c_conf_array s5k3h2_confs[] = {
	{&s5k3h2_snap_settings[0],
	 ARRAY_SIZE(s5k3h2_snap_settings), 0, MSM_CAMERA_I2C_BYTE_DATA},
	{&s5k3h2_prev_settings[0],
	 ARRAY_SIZE(s5k3h2_prev_settings), 0, MSM_CAMERA_I2C_BYTE_DATA},
	{&s5k3h2_fullhd_settings[0],
	 ARRAY_SIZE(s5k3h2_fullhd_settings), 0, MSM_CAMERA_I2C_BYTE_DATA},

};

static struct msm_sensor_output_info_t s5k3h2_dimensions[] = {
	/* snapshot */
	{
	 .x_output = 0xCD0,	/* 3264 */
	 .y_output = 0x9A0,	/* 2448 */
	 .line_length_pclk = 0xD8E,	/* 3470 */
	 .frame_length_lines = 0x9C0,	/* 2496 */
	 .vt_pixel_clk = 174000000,
	 .op_pixel_clk = 174000000,
	 .binning_factor = 0,
	 },
	/* preview */
	{
	 .x_output = 0x668,	/* 1640 */
	 .y_output = 0x4D0,	/* 1232 */
	 .line_length_pclk = 0xD8E,	/* 3470 */
	 .frame_length_lines = 0x4E0,	/* 2496 */
	 .vt_pixel_clk = 130000000,
	 .op_pixel_clk = 174000000,
	 .binning_factor = 1,
	 },
	/* video */
	{
	 .x_output = 0xA40,	/* 2624 */
	 .y_output = 0x5C4,	/* 1476 */
	 .line_length_pclk = 0xD8E,	/* 3470 */
	 .frame_length_lines = 0x5D4,	/* 2496 */
	 .vt_pixel_clk = 155300000,
	 .op_pixel_clk = 174000000,
	 .binning_factor = 1,
	 },
};

static struct msm_camera_csi_params s5k3h2_csic_params = {
	.data_format = CSI_10BIT,
	.lane_cnt = 2,
	.lane_assign = 0xe4,
	.dpcm_scheme = 0,
	.settle_cnt = 0x14,
};

static struct msm_camera_csi_params *s5k3h2_csic_params_array[] = {
	&s5k3h2_csic_params,
	&s5k3h2_csic_params,
	&s5k3h2_csic_params,
};

static struct msm_camera_csid_vc_cfg s5k3h2_cid_cfg[] = {
	{0, CSI_RAW10, CSI_DECODE_10BIT},
	{1, CSI_EMBED_DATA, CSI_DECODE_8BIT},
	{2, CSI_RESERVED_DATA_0, CSI_DECODE_8BIT},
};

static struct msm_camera_csi2_params s5k3h2_csi_params = {
	.csid_params = {
			.lane_cnt = 2,
			.lut_params = {
				       .num_cid = ARRAY_SIZE(s5k3h2_cid_cfg),
				       .vc_cfg = s5k3h2_cid_cfg,
				       },
			},
	.csiphy_params = {
			  .lane_cnt = 2,
			  .settle_cnt = 0x14,
			  },
};

static struct msm_camera_csi2_params *s5k3h2_csi_params_array[] = {
	&s5k3h2_csi_params,
	&s5k3h2_csi_params,
	&s5k3h2_csi_params,
};

static struct msm_sensor_output_reg_addr_t s5k3h2_reg_addr = {
	.x_output = 0x34C,
	.y_output = 0x34E,
	.line_length_pclk = 0x342,
	.frame_length_lines = 0x340,
};

static struct msm_sensor_id_info_t s5k3h2_id_info = {
	.sensor_id_reg_addr = 0x0,
	.sensor_id = 0x382B,
};

static struct msm_sensor_exp_gain_info_t s5k3h2_exp_gain_info = {
	.coarse_int_time_addr = 0x202,
	.global_gain_addr = 0x204,
	.vert_offset = 8,
};

static const struct i2c_device_id s5k3h2_i2c_id[] = {
	{SENSOR_NAME, (kernel_ulong_t) &s5k3h2_s_ctrl},
	{}
};

static struct i2c_driver s5k3h2_i2c_driver = {
	.id_table = s5k3h2_i2c_id,
	.probe = msm_sensor_i2c_probe,
	.driver = {
		   .name = SENSOR_NAME,
		   },
};

static struct msm_camera_i2c_client s5k3h2_sensor_i2c_client = {
	.addr_type = MSM_CAMERA_I2C_WORD_ADDR,
};

static int __init msm_sensor_init_module(void)
{
	return i2c_add_driver(&s5k3h2_i2c_driver);
}

static struct v4l2_subdev_core_ops s5k3h2_subdev_core_ops = {
	.ioctl = msm_sensor_subdev_ioctl,
	.s_power = msm_sensor_power,
};

static struct v4l2_subdev_video_ops s5k3h2_subdev_video_ops = {
	.enum_mbus_fmt = msm_sensor_v4l2_enum_fmt,
};

static struct v4l2_subdev_ops s5k3h2_subdev_ops = {
	.core = &s5k3h2_subdev_core_ops,
	.video = &s5k3h2_subdev_video_ops,
};

static char *sensor_names[5] = { "s5k3h2", "s5k3h2", "s5k3h2s" };

static int32_t s5k3h2_match_id(struct msm_sensor_ctrl_t *s_ctrl)
{

	int32_t rc = 0;
	int32_t i;
	uint16_t chipid = 0;
	uint16_t chipver = 0;

	rc = msm_camera_i2c_read(s_ctrl->sensor_i2c_client,
				 s_ctrl->sensor_id_info->sensor_id_reg_addr,
				 &chipid, MSM_CAMERA_I2C_WORD_DATA);
	if (rc < 0) {
		pr_err("%s: %s: read id failed\n", __func__,
		       s_ctrl->sensordata->sensor_name);
		return rc;
	}

	pr_info("s5k3h2_sensor id: 0x%04x\n", chipid);
	if (chipid != 0x382B) {
		pr_err("s5k3h2_match_id chip id doesnot match 0x%04x\n",
		       chipid);
		return -ENODEV;
	}

	msm_camera_i2c_write(s_ctrl->sensor_i2c_client,
			     0x3A1C, 0x00, MSM_CAMERA_I2C_BYTE_DATA);
	msm_camera_i2c_write(s_ctrl->sensor_i2c_client,
			     0x0A00, 0x04, MSM_CAMERA_I2C_BYTE_DATA);
	msm_camera_i2c_write(s_ctrl->sensor_i2c_client,
			     0x0A02, 0x10, MSM_CAMERA_I2C_BYTE_DATA);
	msm_camera_i2c_write(s_ctrl->sensor_i2c_client,
			     0x0A00, 0x01, MSM_CAMERA_I2C_BYTE_DATA);
	udelay(200);

	for (i = 0; i < 3; i++) {
		rc = msm_camera_i2c_read(s_ctrl->sensor_i2c_client,
					 0x0A06 - i, &chipid,
					 MSM_CAMERA_I2C_BYTE_DATA);
		if (rc < 0)
			pr_info("s5k3h2 select otp bank error rc:%d\n", rc);
		pr_info("s5k3h2 otp:0x%04x", chipid);
		if ((chipid == 0xee) || (chipid == 0xdd) || (chipid == 0xcc) ||
		    (chipid == 0x11) || (chipid == 0x22) || (chipid == 0x33))
			break;
	}
	if ((chipid == 0xee) || (chipid == 0xdd) || (chipid == 0xcc))
		otp_ok = 0;
	else if ((chipid == 0x11) || (chipid == 0x22) || (chipid == 0x33))
		otp_ok = 1;
	else
		pr_err("s5k3h2 no otp data");

	if ((chipid == 0x11) || (chipid == 0xee))
		vendor = LITEON;
	else if ((chipid == 0x22) || (chipid == 0xdd))
		vendor = SUNNY;
	else
		vendor = 0;

	pr_info("%s vendor:%d otp_ok:%d", sensor_names[vendor], vendor, otp_ok);
	s_ctrl->sensordata->sensor_name = sensor_names[vendor];
	return 0;
}

static struct msm_sensor_fn_t s5k3h2_func_tbl = {
	.sensor_start_stream = msm_sensor_start_stream,
	.sensor_stop_stream = msm_sensor_stop_stream,
	.sensor_group_hold_on = msm_sensor_group_hold_on,
	.sensor_group_hold_off = msm_sensor_group_hold_off,
	.sensor_set_fps = msm_sensor_set_fps,
	.sensor_write_exp_gain = msm_sensor_write_exp_gain1,
	.sensor_write_snapshot_exp_gain = msm_sensor_write_exp_gain1,
	.sensor_setting = msm_sensor_setting,
	.sensor_csi_setting = msm_sensor_setting1,
	.sensor_set_sensor_mode = msm_sensor_set_sensor_mode,
	.sensor_mode_init = msm_sensor_mode_init,
	.sensor_get_output_info = msm_sensor_get_output_info,
	.sensor_config = msm_sensor_config,
	.sensor_power_up = msm_sensor_power_up,
	.sensor_power_down = msm_sensor_power_down,
	.sensor_adjust_frame_lines = msm_sensor_adjust_frame_lines,
	.sensor_get_csi_params = msm_sensor_get_csi_params,
	.sensor_match_id = s5k3h2_match_id,
};

static struct msm_sensor_reg_t s5k3h2_regs = {
	.default_data_type = MSM_CAMERA_I2C_BYTE_DATA,
	.start_stream_conf = s5k3h2_start_settings,
	.start_stream_conf_size = ARRAY_SIZE(s5k3h2_start_settings),
	.stop_stream_conf = s5k3h2_stop_settings,
	.stop_stream_conf_size = ARRAY_SIZE(s5k3h2_stop_settings),
	.group_hold_on_conf = s5k3h2_groupon_settings,
	.group_hold_on_conf_size = ARRAY_SIZE(s5k3h2_groupon_settings),
	.group_hold_off_conf = s5k3h2_groupoff_settings,
	.group_hold_off_conf_size = ARRAY_SIZE(s5k3h2_groupoff_settings),
	.init_settings = &s5k3h2_init_conf[0],
	.init_size = ARRAY_SIZE(s5k3h2_init_conf),
	.mode_settings = &s5k3h2_confs[0],
	.output_settings = &s5k3h2_dimensions[0],
	.num_conf = ARRAY_SIZE(s5k3h2_confs),
};

static struct msm_sensor_ctrl_t s5k3h2_s_ctrl = {
	.msm_sensor_reg = &s5k3h2_regs,
	.sensor_i2c_client = &s5k3h2_sensor_i2c_client,
	.sensor_i2c_addr = 0x6E,
	.sensor_output_reg_addr = &s5k3h2_reg_addr,
	.sensor_id_info = &s5k3h2_id_info,
	.sensor_exp_gain_info = &s5k3h2_exp_gain_info,
	.cam_mode = MSM_SENSOR_MODE_INVALID,
	.csic_params = &s5k3h2_csic_params_array[0],
	.csi_params = &s5k3h2_csi_params_array[0],
	.msm_sensor_mutex = &s5k3h2_mut,
	.sensor_i2c_driver = &s5k3h2_i2c_driver,
	.sensor_v4l2_subdev_info = s5k3h2_subdev_info,
	.sensor_v4l2_subdev_info_size = ARRAY_SIZE(s5k3h2_subdev_info),
	.sensor_v4l2_subdev_ops = &s5k3h2_subdev_ops,
	.func_tbl = &s5k3h2_func_tbl,
	.clk_rate = MSM_SENSOR_MCLK_24HZ,
};

module_init(msm_sensor_init_module);
MODULE_DESCRIPTION("SAMSUNG 8MP Bayer sensor driver");
MODULE_LICENSE("GPL v2");
